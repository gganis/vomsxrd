.TH libXrdSecgsiVOMS 1 "25 March 2013"
.SH NAME
libXrdSecgsiVOMS - XRootD plug-in to extract VOMS attributes
.SH SYNOPSIS
.nf

sec.protparm gsi -vomsfun:\fBlibXrdSecgsiVOMS.so\fR
sec.protparm gsi -vomsfunparms:\fIoptions\fR

.SH DESCRIPTION
The \fBlibXrdSecgsiVOMS\fR plug-in provides an implementation of the

.nf
int XrdSecgsiVOMSFun(XrdSecEntity &ent)
int XrdSecgsiVOMSInit(const char *cfg)

functions making use of the official VOMS API libraries to validate and extract the VOMS attributes from a VOMS proxy.

.SH OPTIONS
The following options are available:

\fBcertfmt={raw,pem,x509}\fR
.RS 2
Certificate format: 'raw' to be used with XrdCrypto tools; 'pem' PEM base64 format (as in cert files);
'x509', as a STACK_OF(X509). Default: 'raw'.
.RE

\fBgroupopt=opt\fR
.RS 2
What to do with the group names; defined as opt = sel * 10 + which, with 'sel' either \fB0\fR (consider all those present)
or \fB1\fR (select among those specified by the 'grps' option; see below), and 'which' either \fB0\fR (take the first one)
or \fB1\fR (take the last).
.RE

\fBgrps=grp1[,grp2,...]\fR
.RS 2
Group(s) for which the information is extracted; if specified the grpopt 'sel' is set to 1 regardless of the setting; see NOTES below.
.RE

\fBvos=vo1[,vo2,...]\fR
.RS 2
VOs to be considered; the first match is taken; see NOTES below.
.RE

\fBdbg\fR
.RS 2
Force verbose mode.
.RE

Multiple options can be specified separated by '\fR|\fB'.

.SH NOTES

Specifying 'grps' or 'vos' options forces a failure if the requested group and/or VO is not found. In this regard, this plug-in may
act as a sort of authorization filter. Note that most refined authorization based on VOMS information may be achieved using
the \fBlibXrdSecgsiAuthzVO\fR plug-in distributed with XRootD.

.SH EXAMPLES

The following example shows how configure the plugin to select VO=cms, select the first group, use the PEM format for the proxy
and switch on debugging; it shows also how to specify multiple options, either on the same line or on multiple lines.
.RS 5

.nf
sec.protparm gsi -vomsfun:libXrdSecgsiVOMS.so
sec.protparm gsi -vomsfunparms:grpopt=0|vos=cms|certfmt=pem
sec.protparm gsi -vomsfunparms:dbg

.SH FILES
The plug-in files are
.nf

libXrdSecgsiVOMS.so\fR
libXrdSecgsiVOMS.so.1\fR
libXrdSecgsiVOMS.so.1.0.0

and are typically available under \fB/usr/lib\fr or \fB/usr/lib64\fR.


.SH ENVIRONMENT
The environment \fBX509_VOMS_DIR\fR must be set to a valid directory; this is typically \fB/etc/grid-security/vomsdir\fR.

.SH DIAGNOSTICS
The \fBlibXrdSecgsiVOMS\fR plug-in requires \fBlibvomsapi.so\fR and the openssl libraries. In case of load failuer it may be
useful to check with ldd if all the required dependencies are correctly resolved.

.SH LICENSE
LGPL; see http://www.gnu.org/licenses/.

.SH AUTHOR AND SUPPORT
The \fBlibXrdSecgsiVOMS\fR plug-in has been implemented by Gerardo Ganis (Gerardo.Ganis@cern.ch).
Any request for support should addressed via the project main web site
.ce
https://github.com/gganis/voms

or via the XRootD support site
.ce
https://github.com/xrootd/xrootd


